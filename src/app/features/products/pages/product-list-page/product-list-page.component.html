<section class="product-list-page">
  <header class="page-header">
    <h1>Electronics &amp; Tech</h1>
    <p class="subtitle">Browse our selection of gadgets and tech gear.</p>
  </header>

  <div class="product-grid" [attr.data-cart-count]="cart.totalItemCount()">
    @for (product of products; track product.id) {
      <article class="product-card">
        <div class="product-image">
          <img [src]="product.imageUrl" [alt]="product.name" loading="lazy" />
        </div>
        <div class="product-body">
          <span class="product-category">{{ product.category }}</span>
          <h2 class="product-name">{{ product.name }}</h2>
          <p class="product-desc">{{ product.description }}</p>
          @if (product.rating) {
            <p class="product-rating">★ {{ product.rating }}</p>
          }
          <p class="product-price">{{ product.price | number : '1.2-2' }} {{ 'USD' }}</p>

          <div class="product-actions">
            @if (getQuantity(product.id) === 0) {
              <button type="button" class="btn-add" (click)="addToCart(product)">
                Add to cart
              </button>
            } @else {
              <div class="quantity-controls">
                <button type="button" class="btn-qty" (click)="decrease(product.id, getQuantity(product.id))" aria-label="Decrease">−</button>
                <span class="qty-value">{{ getQuantity(product.id) }}</span>
                <button type="button" class="btn-qty" (click)="increase(product.id, getQuantity(product.id))" aria-label="Increase">+</button>
              </div>
            }
          </div>
        </div>
      </article>
    }
  </div>
</section>
